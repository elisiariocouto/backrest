function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r=globalThis.parcelRequire233b,a=r.register;a("hkIWJ",function(t,a){e(t.exports,"PlanView",()=>w);var l=r("ayMG0");r("acw62");var n=r("4Uh7a"),s=r("h5DBq"),o=r("4RmmN"),i=r("VoMtX"),c=r("93lJr"),u=r("3JMMO"),d=r("bNqR0"),p=r("1Yxub"),f=r("cT7kT"),m=r("2qtef"),h=r("dkYnv"),g=r("lPKqJ"),y=r("1VQWV"),x=r("fz9dF"),v=r("a7ovc");let w=({plan:e})=>{let[t,a]=(0,y.useConfig)(),w=(0,u.useAlertApi)(),b=(0,h.useShowModal)(),O=t?.repos.find(t=>t.id===e.repo),C=async()=>{try{await p.backrestService.backup({value:e.id}),w.success("Backup scheduled.")}catch(e){w.error("Failed to schedule backup: "+e.message)}},j=async()=>{try{w.info("Unlocking repo..."),await p.backrestService.doRepoTask((0,g.create)(f.DoRepoTaskRequestSchema,{repoId:e.repo,task:f.DoRepoTaskRequest_Task.UNLOCK})),w.success("Repo unlocked.")}catch(e){w.error("Failed to unlock repo: "+e.message)}},S=async()=>{try{w.info("Clearing error history..."),await p.backrestService.clearHistory((0,g.create)(f.ClearHistoryRequestSchema,{selector:{planId:e.id,repoGuid:O.guid},onlyFailed:!0})),w.success("Error history cleared.")}catch(e){w.error("Failed to clear error history: "+e.message)}};return O?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.default,{gap:"small",align:"center",wrap:"wrap",children:(0,l.jsx)(c.default.Title,{children:e.id})}),(0,l.jsxs)(s.default,{gap:"small",align:"center",wrap:"wrap",children:[(0,l.jsx)(m.SpinButton,{type:"primary",onClickAsync:C,children:"Backup Now"}),(0,l.jsx)(i.default,{title:"Advanced users: open a restic shell to run commands on the repository. Re-index snapshots to reflect any changes in Backrest.",children:(0,l.jsx)(n.default,{type:"default",onClick:async()=>{let{RunCommandModal:e}=await r("lkdpj");b((0,l.jsx)(e,{repo:O}))},children:"Run Command"})}),(0,l.jsx)(i.default,{title:"Removes lockfiles and checks the repository for errors. Only run if you are sure the repo is not being accessed by another system",children:(0,l.jsx)(m.SpinButton,{type:"default",onClickAsync:j,children:"Unlock Repo"})}),(0,l.jsx)(i.default,{title:"Removes failed operations from the list",children:(0,l.jsx)(m.SpinButton,{type:"default",onClickAsync:S,children:"Clear Error History"})})]}),(0,l.jsx)(o.default,{defaultActiveKey:"1",items:[{key:"1",label:"Tree View",children:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(v.OperationTreeView,{req:(0,g.create)(f.GetOperationsRequestSchema,{selector:{instanceId:t?.instance,repoGuid:O.guid,planId:e.id},lastN:BigInt(d.MAX_OPERATION_HISTORY)}),isPlanView:!0})}),destroyOnHidden:!0},{key:"2",label:"List View",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{children:"Backup Action History"}),(0,l.jsx)(x.OperationListView,{req:(0,g.create)(f.GetOperationsRequestSchema,{selector:{instanceId:t?.instance,repoGuid:O.guid,planId:e.id},lastN:BigInt(d.MAX_OPERATION_HISTORY)}),showDelete:!0})]}),destroyOnHidden:!0}]})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(c.default.Title,{children:["Repo ",e.repo," for plan ",e.id," not found"]})})}}),a("h5DBq",function(a,l){e(a.exports,"default",()=>f);var n=r("acw62"),s=r("8g1PZ"),o=r("1pcHX"),i=r("hMaQy"),c=r("aT8OD"),u=r("8zQmX"),d=r("5XBQv"),p=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)0>t.indexOf(a[l])&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(r[a[l]]=e[a[l]]);return r},f=t(n).forwardRef((e,r)=>{let{prefixCls:a,rootClassName:l,className:f,style:m,flex:h,gap:g,vertical:y=!1,component:x="div",children:v}=e,w=p(e,["prefixCls","rootClassName","className","style","flex","gap","vertical","component","children"]),{flex:b,direction:O,getPrefixCls:C}=t(n).useContext(c.ConfigContext),j=C("flex",a),[S,k,R]=(0,u.default)(j),N=null!=y?y:null==b?void 0:b.vertical,P=t(s)(f,l,null==b?void 0:b.className,j,k,R,(0,d.default)(j,e),{[`${j}-rtl`]:"rtl"===O,[`${j}-gap-${g}`]:(0,i.isPresetSize)(g),[`${j}-vertical`]:N}),E=Object.assign(Object.assign({},null==b?void 0:b.style),m);return h&&(E.flex=h),g&&!(0,i.isPresetSize)(g)&&(E.gap=g),S(t(n).createElement(x,Object.assign({ref:r,className:P,style:E},(0,o.default)(w,["justify","wrap","align"])),v))})}),a("hMaQy",function(t,r){function a(e){return["small","middle","large"].includes(e)}function l(e){return!!e&&"number"==typeof e&&!Number.isNaN(e)}e(t.exports,"isPresetSize",()=>a),e(t.exports,"isValidGapNumber",()=>l)}),a("8zQmX",function(t,a){e(t.exports,"default",()=>o);var l=r("1kAJu"),n=r("1nWFx"),s=r("5XBQv"),o=(0,l.genStyleHooks)("Flex",e=>{let{paddingXS:t,padding:r,paddingLG:a}=e,l=(0,n.mergeToken)(e,{flexGapSM:t,flexGap:r,flexGapLG:a});return[(e=>{let{componentCls:t}=e;return{[t]:{display:"flex",margin:0,padding:0,"&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}})(l),(e=>{let{componentCls:t}=e;return{[t]:{"&-gap-small":{gap:e.flexGapSM},"&-gap-middle":{gap:e.flexGap},"&-gap-large":{gap:e.flexGapLG}}}})(l),(e=>{let{componentCls:t}=e,r={};return s.flexWrapValues.forEach(e=>{r[`${t}-wrap-${e}`]={flexWrap:e}}),r})(l),(e=>{let{componentCls:t}=e,r={};return s.alignItemsValues.forEach(e=>{r[`${t}-align-${e}`]={alignItems:e}}),r})(l),(e=>{let{componentCls:t}=e,r={};return s.justifyContentValues.forEach(e=>{r[`${t}-justify-${e}`]={justifyContent:e}}),r})(l)]},()=>({}),{resetStyle:!1})}),a("5XBQv",function(a,l){e(a.exports,"flexWrapValues",()=>s),e(a.exports,"justifyContentValues",()=>o),e(a.exports,"alignItemsValues",()=>i),e(a.exports,"default",()=>c);var n=r("8g1PZ");let s=["wrap","nowrap","wrap-reverse"],o=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],i=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"];var c=function(e,r){return t(n)(Object.assign(Object.assign(Object.assign({},((e,t)=>{let r=!0===t.wrap?"wrap":t.wrap;return{[`${e}-wrap-${r}`]:r&&s.includes(r)}})(e,r)),((e,t)=>{let r={};return i.forEach(a=>{r[`${e}-align-${a}`]=t.align===a}),r[`${e}-align-stretch`]=!t.align&&!!t.vertical,r})(e,r)),((e,t)=>{let r={};return o.forEach(a=>{r[`${e}-justify-${a}`]=t.justify===a}),r})(e,r)))}}),a("2qtef",function(a,l){e(a.exports,"SpinButton",()=>i),e(a.exports,"ConfirmButton",()=>c);var n=r("ayMG0"),s=r("acw62"),o=r("4Uh7a");let i=t(s).forwardRef(({onClickAsync:e,...t},r)=>{let[a,l]=(0,s.useState)(!1),i=async()=>{if(!a)try{l(!0),await e()}finally{l(!1)}};return(0,n.jsx)(o.default,{...t,ref:r,loading:a,onClick:i})});i.displayName="SpinButton";let c=t(s).forwardRef(({onClickAsync:e,confirmTimeout:t,confirmTitle:r,children:a,...l},o)=>{let[c,u]=(0,s.useState)(!1);void 0===t&&(t=2e3);let d=async()=>{if(!c){u(!0),setTimeout(()=>{u(!1)},t);return}u(!1),await e()};return(0,n.jsx)(i,{...l,ref:o,onClickAsync:d,children:c?r:a})});c.displayName="ConfirmButton"}),a("lkdpj",function(e,t){e.exports=import("lR4DZ").then(()=>r("fFsUW"))}),a("bmzDK",function(t,r){e(t.exports,"isMobile",()=>a);let a=()=>window.innerWidth<=1024||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}),a("bDRCH",function(a,l){e(a.exports,"URIAutocomplete",()=>p);var n=r("ayMG0"),s=r("ahXgR"),o=r("acw62"),i=r("3xSyo"),c=r("1Yxub"),u=r("f1q41");let d=i.isWindows?"\\":"/",p=e=>{let[r,a]=(0,o.useState)(""),[l,p]=(0,o.useState)([]),[f,m]=(0,o.useState)([]);(0,o.useEffect)(()=>{m(l.filter(e=>-1!==e.value.indexOf(r)))},[l]);let h=t(u).debounce(e=>{a(e);let t=e.lastIndexOf(d);-1!==t&&(e=e.substring(0,t)),c.backrestService.pathAutocomplete({value:e+d}).then(t=>{t.values&&p(t.values.map(t=>({value:e+d+t})))}).catch(e=>{console.log("Path autocomplete error: ",e)})},200);return(0,n.jsx)(s.default,{options:f,onSearch:h,rules:[{validator:async(t,r)=>{if(e.globAllowed)return Promise.resolve();if(i.isWindows){if(r.match(/^[a-zA-Z]:\\$/))return Promise.reject(Error("Path must start with a drive letter e.g. C:\\"));else if(r.includes("/"))return Promise.reject(Error("Path must use backslashes e.g. C:\\Users\\MyUsers\\Documents"))}return Promise.resolve()}}],...e})}}),a("ahXgR",function(t,a){e(t.exports,"default",()=>d);var l=r("1pcHX"),n=r("ctW3E"),s=r("2lwvh"),o=r("lFZNR");let{Option:i}=s.default,c=(0,n.default)(o.default,"dropdownAlign",e=>(0,l.default)(e,["visible"])),u=o.default;u.Option=i,u._InternalPanelDoNotUseOrYouWillBeFired=c;var d=u}),a("lFZNR",function(a,l){e(a.exports,"default",()=>m);var n=r("acw62"),s=r("8g1PZ"),o=r("jWR62"),i=r("1pcHX"),c=r("brFSt"),u=r("aT8OD"),d=r("2lwvh");let{Option:p}=d.default;function f(e){return(null==e?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}var m=n.forwardRef((e,r)=>{var a,l;let m,h,{prefixCls:g,className:y,popupClassName:x,dropdownClassName:v,children:w,dataSource:b,dropdownStyle:O,dropdownRender:C,popupRender:j,onDropdownVisibleChange:S,onOpenChange:k,styles:R,classNames:N}=e,P=(0,o.default)(w),E=(null==(a=null==R?void 0:R.popup)?void 0:a.root)||O,I=(null==(l=null==N?void 0:N.popup)?void 0:l.root)||x||v;1===P.length&&n.isValidElement(P[0])&&!f(P[0])&&([m]=P);let B=m?()=>m:void 0;h=P.length&&f(P[0])?w:b?b.map(e=>{if(n.isValidElement(e))return e;switch(typeof e){case"string":return n.createElement(p,{key:e,value:e},e);case"object":{let{value:t}=e;return n.createElement(p,{key:t,value:t},e.text)}default:return}}):[];let{getPrefixCls:A}=n.useContext(u.ConfigContext),T=A("select",g),[M]=(0,c.useZIndex)("SelectLike",null==E?void 0:E.zIndex);return n.createElement(d.default,Object.assign({ref:r,suffixIcon:null},(0,i.default)(e,["dataSource","dropdownClassName","popupClassName"]),{prefixCls:T,classNames:{popup:{root:I},root:null==N?void 0:N.root},styles:{popup:{root:Object.assign(Object.assign({},E),{zIndex:M})},root:null==R?void 0:R.root},className:t(s)(`${T}-auto-complete`,y),mode:d.default.SECRET_COMBOBOX_MODE_DO_NOT_USE,popupRender:j||C,onOpenChange:k||S,getInputElement:B}),h)})}),a("bUBaJ",function(t,a){e(t.exports,"default",()=>i);var l=r("8nd05"),n=r("acw62"),s=r("h6oXS"),o=r("adRcI"),i=n.forwardRef(function(e,t){return n.createElement(o.default,(0,l.default)({},e,{ref:t,icon:s.default}))})}),a("h6oXS",function(t,r){e(t.exports,"default",()=>a);var a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"}});
//# sourceMappingURL=PlanView.63ca5bb5.js.map

function e(e){return e&&e.__esModule?e.default:e}var t=globalThis.parcelRequire233b;(0,t.register)("fFsUW",function(n,r){Object.defineProperty(n.exports,"RunCommandModal",{get:()=>g,set:void 0,enumerable:!0,configurable:!0});var a=t("ayMG0"),o=t("eTcXV"),i=t("jCenh"),l=t("cjjxG"),s=t("acw62"),c=t("dkYnv"),u=t("1Yxub"),d=t("2qtef"),m=t("3JMMO"),p=t("cT7kT"),h=t("fz9dF"),f=t("lPKqJ"),y=t("1VQWV");let g=({repo:t})=>{let[n,r]=(0,y.useConfig)(),g=(0,c.useShowModal)(),C=(0,m.useAlertApi)(),[x,j]=e(s).useState(""),[b,v]=e(s).useState(!1),R=async()=>{if(!x)return;v(!0);let e=x.trim();j("");try{await u.backrestService.runCommand((0,f.create)(p.RunCommandRequestSchema,{repoId:t.id,command:e}))}catch(e){C.error("Command failed: "+e.message)}finally{v(!1)}};return(0,a.jsxs)(i.default,{open:!0,onCancel:()=>{g(null)},title:"Run Command in repo "+t.id,width:"80vw",footer:[],children:[(0,a.jsxs)(l.default.Compact,{style:{width:"100%"},children:[(0,a.jsx)(o.default,{placeholder:"Run a restic command e.g. 'help' to print help text",value:x,onChange:e=>j(e.target.value),onKeyUp:e=>{"Enter"===e.key&&R()}}),(0,a.jsx)(d.SpinButton,{type:"primary",onClickAsync:R,children:"Execute"})]}),b&&x?(0,a.jsx)("em",{style:{color:"gray"},children:"Warning: another command is already running. Wait for it to finish before running another operation that requires the repo lock."}):null,(0,a.jsx)(h.OperationListView,{req:(0,f.create)(p.GetOperationsRequestSchema,{selector:{instanceId:n?.instance,repoGuid:t.guid,planId:"_system_"}}),filter:e=>"operationRunCommand"===e.op.case})]})}});
//# sourceMappingURL=RunCommandModal.109faed3.js.map
